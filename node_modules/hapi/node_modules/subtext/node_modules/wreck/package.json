{
  "name": "wreck",
  "description": "HTTP Client Utilities",
  "version": "8.0.1",
  "repository": {
    "type": "git",
    "url": "git://github.com/hapijs/wreck"
  },
  "main": "lib/index",
  "keywords": [
    "utilities",
    "http",
    "client"
  ],
  "engines": {
    "node": ">=4.0.0"
  },
  "dependencies": {
    "boom": "3.x.x",
    "hoek": "4.x.x"
  },
  "devDependencies": {
    "code": "3.x.x",
    "lab": "10.x.x",
    "require-reload": "0.2.x"
  },
  "scripts": {
    "test": "lab -t 100 -L -a code",
    "test-cov-html": "lab -r html -o coverage.html -a code"
  },
  "license": "BSD-3-Clause",
  "readme": "![wreck Logo](https://raw.github.com/hapijs/wreck/master/images/wreck.png)\r\n\r\n### HTTP Client Utilities\r\n\r\n[![Npm Version](https://img.shields.io/npm/v/wreck.svg)](https://npmjs.com/package/wreck)\r\n[![Node Version](https://img.shields.io/node/v/wreck.svg)](https://npmjs.com/package/wreck)\r\n[![Build Status](https://secure.travis-ci.org/hapijs/wreck.svg)](http://travis-ci.org/hapijs/wreck)\r\n\r\nLead Maintainer: [Wyatt Preul](https://github.com/geek)\r\n\r\n## Usage\r\n\r\n### Basic\r\n```javascript\r\nvar Wreck = require('wreck');\r\n\r\nWreck.get('https://google.com/', function (err, res, payload) {\r\n    /* do stuff */\r\n});\r\n```\r\n\r\n### Advanced\r\n```javascript\r\nvar Wreck = require('wreck');\r\n\r\nvar method = 'GET'; // GET, POST, PUT, DELETE\r\nvar uri    = '/';\r\nvar readableStream = Wreck.toReadableStream('foo=bar');\r\n\r\nvar wreck = Wreck.defaults({\r\n    headers: { 'x-foo-bar': 123 }\r\n});\r\n\r\n// cascading example -- does not alter `wreck`\r\nvar wreckWithTimeout = wreck.defaults({\r\n    timeout: 5\r\n});\r\n\r\n// all attributes are optional\r\nvar options = {\r\n    baseUrl:   \"https://www.example.com\",\r\n    payload:   readableStream || 'foo=bar' || new Buffer('foo=bar'),\r\n    headers:   { /* http headers */ },\r\n    redirects: 3,\r\n    beforeRedirect: function (redirectMethod, statusCode, location, resHeaders, redirectOptions, next) { return next() },\r\n    redirected: function (statusCode, location, req) {},\r\n    timeout:   1000,    // 1 second, default: unlimited\r\n    maxBytes:  1048576, // 1 MB, default: unlimited\r\n    rejectUnauthorized: true || false,\r\n    downstreamRes: null,\r\n    agent: null,         // Node Core http.Agent\r\n    secureProtocol: 'SSLv3_method' // The SSL method to use\r\n};\r\n\r\nvar optionalCallback = function (err, res) {\r\n\r\n    /* handle err if it exists, in which case res will be undefined */\r\n\r\n    // buffer the response stream\r\n    Wreck.read(res, null, function (err, body) {\r\n        /* do stuff */\r\n    });\r\n};\r\n\r\nvar req = wreck.request(method, uri, options, optionalCallback);\r\n```\r\n\r\n### `defaults(options)`\r\n\r\nReturns a *new* instance of Wreck which merges the provided `options` with those provided on a per-request basis. You can call defaults repeatedly to build up multiple http clients.\r\n- `options` - Config object containing settings for both `request` and `read` operations.\r\n\r\n### `request(method, uri, [options, [callback]])`\r\n\r\nInitiate an HTTP request.\r\n- `method` - A string specifying the HTTP request method, defaulting to 'GET'.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - An optional configuration object. To omit this argument but still\r\n  use a callback, pass `null` in this position. The options object supports the\r\n  following optional keys:\r\n    - `baseUrl` - fully qualified uri string used as the base url. Most useful with `request.defaults`, for example when you want to do many requests to the same domain.\r\n                  If `baseUrl` is `https://example.com/api/`, then requesting `/end/point?test=true` will fetch `https://example.com/api/end/point?test=true`. Any\r\n                  querystring in the `baseUrl` will be overwritten with the querystring in the `uri` When `baseUrl` is given, `uri` must also be a string.\r\n    - `socketPath` - `/path/to/unix/socket` for Server.\r\n    - `payload` - The request body as string, Buffer, or Readable Stream.\r\n    - `headers` - An object containing request headers.\r\n    - `redirects` - The maximum number of redirects to follow.\r\n    - `redirect303` - if `true`, treats HTTP 303 status code the same way as a 301/302. Defaults to no redirection on 303.\r\n    - `beforeRedirect` - A callback function that is called before a redirect is triggered, using the signature\r\n      `function(redirectMethod, statusCode, location, resHeaders, redirectOptions, next)` where:\r\n          - `redirectMethod` - A string specifying the redirect method.\r\n          - `statusCode` - HTTP status code of the response that triggered the redirect.\r\n          - `location` - The redirect location string.\r\n          - `resHeaders` - An object with the headers received as part of the redirection response.\r\n          - `redirectOptions` - Options that will be applied to the redirect request. Changes to this object are applied to the redirection request.\r\n          - `next` - the callback function called to perform the redirection using signature `function()`.\r\n    - `redirected` - A callback function that is called when a redirect was triggered, using the signature `function(statusCode, location, req)` where:\r\n      - `statusCode` - HTTP status code of the response that triggered the redirect.\r\n      - `location` - The redirected location string.\r\n      - `req` - The new [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object which replaces the one initially returned.\r\n    - `timeout` - The number of milliseconds to wait without receiving a response\r\n      before aborting the request. Defaults to unlimited.\r\n    - `maxBytes` - maximum size for response payload. Defaults to unlimited.\r\n    - `rejectUnauthorized` - [TLS](http://nodejs.org/api/tls.html) flag indicating\r\n      whether the client should reject a response from a server with invalid certificates.  This cannot be set at the\r\n      same time as the `agent` option is set.\r\n    - `downstreamRes`: downstream Resource dependency.\r\n    - `agent` - Node Core [http.Agent](http://nodejs.org/api/http.html#http_class_http_agent).\r\n      Defaults to either `wreck.agents.http` or `wreck.agents.https`.  Setting to `false` disables agent pooling.\r\n    - `secureProtocol` - [TLS](http://nodejs.org/api/tls.html) flag indicating the SSL method to use, e.g. `SSLv3_method`\r\n      to force SSL version 3. The possible values depend on your installation of OpenSSL. Read the official OpenSSL docs\r\n      for possible [SSL_METHODS](http://www.openssl.org/docs/ssl/ssl.html#DEALING_WITH_PROTOCOL_METHODS).\r\n- `callback` - The optional callback function using the signature `function (err, response)` where:\r\n    - `err` - Any error that may have occurred during the handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n\r\n### `read(response, options, callback)`\r\n- `response` - An HTTP Incoming Message object.\r\n- `options` - `null` or a configuration object with the following optional keys:\r\n    - `timeout` - The number of milliseconds to wait while reading data before\r\n    aborting handling of the response. Defaults to unlimited.\r\n    - `json` - A value indicating how to try to parse the payload as JSON. Defaults to `undefined` meaning no parse logic.\r\n        - `true`, 'smart' - only try `JSON.parse` if the response indicates a JSON content-type.\r\n        - `force` - try `JSON.parse` regardless of the content-type header.\r\n    - `maxBytes` - The maximum allowed response payload size. Defaults to unlimited.\r\n- `callback` - The callback function using the signature `function (err, payload)` where:\r\n    - `err` - Any error that may have occurred while reading the response.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\n\r\n### `get(uri, [options], callback)`\r\n\r\nConvenience method for GET operations.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - Optional config object containing settings for both `request` and\r\n  `read` operations.\r\n- `callback` - The callback function using the signature `function (err, response, payload)` where:\r\n    - `err` - Any error that may have occurred during handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n\r\n### `post(uri, [options], callback)`\r\n\r\nConvenience method for POST operations.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - Optional config object containing settings for both `request` and\r\n  `read` operations.\r\n- `callback` - The callback function using the signature `function (err, response, payload)` where:\r\n    - `err` - Any error that may have occurred during handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n### `patch(uri, [options], callback)`\r\n\r\nConvenience method for PATCH operations.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - Optional config object containing settings for both `request` and\r\n  `read` operations.\r\n- `callback` - The callback function using the signature `function (err, response, payload)` where:\r\n    - `err` - Any error that may have occurred during handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n\r\n### `put(uri, [options], callback)`\r\n\r\nConvenience method for PUT operations.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - Optional config object containing settings for both `request` and\r\n  `read` operations.\r\n- `callback` - The callback function using the signature `function (err, response, payload)` where:\r\n    - `err` - Any error that may have occurred during handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n\r\n### `delete(uri, [options], callback)`\r\n\r\nConvenience method for DELETE operations.\r\n- `uri` - The URI of the requested resource.\r\n- `options` - Optional config object containing settings for both `request` and\r\n  `read` operations.\r\n- `callback` - The callback function using the signature `function (err, response, payload)` where:\r\n    - `err` - Any error that may have occurred during handling of the request.\r\n    - `response` - The [HTTP Incoming Message](http://nodejs.org/api/http.html#http_http_incomingmessage)\r\n       object, which is also a readable stream.\r\n    - `payload` - The payload in the form of a Buffer or (optionally) parsed JavaScript object (JSON).\r\n\r\nReturns an instance of the node.js [ClientRequest](http://nodejs.org/api/http.html#http_class_http_clientrequest) object.\r\n\r\n\r\n### `toReadableStream(payload, [encoding])`\r\n\r\nCreates a [readable stream](http://nodejs.org/api/stream.html#stream_class_stream_readable)\r\nfor the provided payload and encoding.\r\n- `payload` - The Buffer or string to be wrapped in a readable stream.\r\n- `encoding` - The encoding to use. Must be a valid Buffer encoding, such as 'utf8' or 'ascii'.\r\n\r\n```javascript\r\nvar stream = Wreck.toReadableStream(new Buffer('Hello', 'ascii'), 'ascii');\r\nvar read = stream.read();\r\n// read -> 'Hello'\r\n```\r\n\r\n### `parseCacheControl(field)`\r\n\r\nParses the provided *cache-control* request header value into an object containing\r\na property for each directive and it's value. Boolean directives, such as \"private\"\r\nor \"no-cache\" will be set to the boolean `true`.\r\n- `field` - The header cache control value to be parsed.\r\n\r\n```javascript\r\nvar  result = Wreck.parseCacheControl('private, max-age=0, no-cache');\r\n// result.private -> true\r\n// result['max-age'] -> 0\r\n// result['no-cache'] -> true\r\n```\r\n\r\n### `agents`\r\n\r\nObject that contains the agents for pooling connections for `http` and `https`.  The properties are `http`, `https`, and\r\n`httpsAllowUnauthorized` which is an `https` agent with `rejectUnauthorized` set to true.  All agents have `maxSockets`\r\nconfigured to `Infinity`.  They are each instances of the node.js\r\n[Agent](http://nodejs.org/api/http.html#http_class_http_agent) and expose the standard properties.\r\n\r\nFor example, the following code demonstrates changing `maxSockets` on the `http` agent.\r\n\r\n ```js\r\n var Wreck = require('wreck');\r\n\r\n Wreck.agents.http.maxSockets = 20;\r\n ```\r\n\r\n\r\n### Events\r\n\r\n#### `request`\r\n\r\nThe request event is emitted just before *wreck* makes a request.  The\r\nhandler should accept the following arguments `(uri, options)` where:\r\n\r\n  - `uri` - the result of `Url.parse(uri)`. This will provide information about the resource requested.  Also includes the headers and method.\r\n  - `options` - the options passed into the request function.  This will include\r\n  a payload if there is one.\r\n\r\nSince the `request` event executes on a global event handler, you can intercept\r\nand decorate a request before its sent.\r\n\r\n\r\n#### `response`\r\n\r\nThe response event is always emitted for any request that *wreck* makes.  The\r\nhandler should accept the following arguments `(error, request, response, start,\r\nuri)` where:\r\n\r\n  - `error` - a Boom error\r\n  - `request` - the raw `ClientHttp` request object\r\n  - `response` - the raw `IncomingMessage` response object\r\n  - `start` - the time that the request was initiated\r\n  - `uri` - the result of `Url.parse(uri)`. This will provide information about the resource requested.  Also includes\r\n    the headers and method.\r\n\r\nThis event is useful for logging all requests that go through *wreck*. The error\r\nand response arguments can be undefined depending on if an error occurs.  Please\r\nbe aware that if multiple modules are depending on the same cached *wreck*\r\nmodule that this event can fire for each request made across all modules.  The\r\nstart argument is the timestamp when the request was started.  This can be\r\nuseful for determining how long it takes *wreck* to get a response back and\r\nprocessed.\r\n\r\nThe `EventEmitter` is attached to the `process` object under a `Symbol` with the\r\nvalue of `'wreck'`.  Therefore, if you want to capture a wreck event, after wreck\r\nhas been loaded, but in a module that doesn't require wreck, you can handle\r\nevents in the following way:\r\n\r\n```js\r\nconst symbol = Symbol.for('wreck');\r\nprocess[symbol].on('response', (err) => {\r\n\r\n    if (err) {\r\n      console.error(err);\r\n    }\r\n});\r\n```\r\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/hapijs/wreck/issues"
  },
  "_id": "wreck@8.0.1",
  "_from": "wreck@8.x.x"
}
